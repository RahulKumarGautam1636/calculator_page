<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="CSS/styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://unpkg.com/vanilla-picker@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Spartan:wght@700&display=swap" rel="stylesheet">
  <title>Frontend Mentor | Calculator app</title>
  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
</head>

<body>
  <main>
    <div class="calculator_body">
      <div class="top_container">
        <h1 onclick="updateColors()" name="calc" class="calc">calc</h1>
        <div class="themes_container">
          <p id="theme">THEME</p>
          <div class="toggleBar_outer_container">
            <div class="themeNumbers_container">
              <p>1</p>
              <p>2</p>
              <p>3</p>
              <img class="setting" onclick="setColors()" src="CSS/settings-svgrepo-com.svg" alt="settings">
            </div>
            <div name="toggleBG" onclick="toggleTheme()" class="toggleBar">
              <div class="roundButton"></div>
            </div>
          </div>
        </div>
      </div>
      <div name="screenBG" class="screen_container">
        <div class="subScreen">
          <p class="total"></p>
        </div>
        <div class="mainScreen">
          <h1 id="display">0</h1>
        </div>
      </div>
      <div class="keypad_container">
        <div class="row_1">
          <button class="num" value="7">7</button>
          <button class="num" value="8">8</button>
          <button class="num" value="9">9</button>
          <button onclick="deleteOne()" class="deleteButton">DEL</button>
        </div>
        <div class="row_2">
          <button class="num" value="4">4</button>
          <button class="num" value="5">5</button>
          <button class="num" value="6">6</button>
          <button class="num" value="+">+</button>
        </div>
        <div class="row_3">
          <button class="num" value="1">1</button>
          <button class="num" value="2">2</button>
          <button class="num" value="3">3</button>
          <button class="num" value="-">-</button>
        </div>
        <div class="row_4">
          <button onclick="addDecimal()" class="" value=".">.</button>
          <button onclick="zero()" value="0">0</button>
          <button class="num" value="/">/</button>
          <button class="num" value="*">*</button>
        </div>
        <div class="row_5">
          <button onclick="clearScreen()" class="resetButton">RESET</button>
          <button onclick="getResult()" class="resultButton">=</button>
        </div>
      </div>
    </div>
    <div class="outer_container">
      <div name="mainBG" class="background4"></div>
      <div class="background1"></div>
      <div class="background2"></div>
      <div class="background3"></div>
    </div>
    <div class="colors-container">
      <div class="colors">
        <!-- <div> -->
          <div>
            <h2>CHOOSE COLOR FOR</h2>
            <div id="icons">
            <!-- <img class="setting" style="filter: invert(0)" onclick="setClrValue()" src="CSS/icon-close.svg" alt="settings"> -->
            <img class="setting" src="CSS/check-svgrepo-com.svg" onclick="setColors()" style="filter: invert(0)" alt="save">
            <img class="setting" id="refresh" src="CSS/refresh-svgrepo-com.svg" onclick="resetColors()" style="filter: invert(0)" alt="reset">
            </div>
          </div>
          <div>
            <span id="BG" class="activeTab" onclick="setBG()">BACKGROUNDS</span>
            <span id="keys" onclick="setKeys()">KEYS</span>
            <span id="texts" onclick="setText()">TEXTS</span>
          </div>
          <div class="">
            <div class="colorTab">
              <ul id="tab-BG" class="active-color-tab">
                <!-- <li>MAIN BACKGROUND <span data="#5c040c" style="background: #5c040c" id="mainBG"></span></li>
                <li>KEYPAD/TOGGLE BACKGROUND <span data="#ff0c0073" style="background: #ff0c0073" id="toggleBG"></span></li>
                <li>SCREEN BACKGROUND <span data="#ff0c00" style="background: #ff0c00" id="screenBG"></span></li> -->

                <li>MAIN BACKGROUND <span data="#5c040c" id="mainBG"></span></li>
                <li>KEYPAD/TOGGLE BACKGROUND <span data="#ff0c0073" id="toggleBG"></span></li>
                <li>SCREEN BACKGROUND <span data="#ff0c00" id="screenBG"></span></li>
              </ul>
              <ul id="tab-keys">
                <!-- <li>NUMBER KEYS <span data="hsl(327, 100%, 40%)" style="background: hsl(327, 100%, 40%)" id="key"></span></li>
                <li>DEL/RESET KEYS <span data="hsl(197, 100%, 27%)" style="background: hsl(197, 100%, 27%)" id="key1"></span></li>
                <li>EQUAL KEY <span data="hsl(108, 100%, 44%)" style="background: hsl(108, 100%, 44%)" id="key2"></span></li> -->

                <li class="keyBG">NUMBER KEYS <span data="#ff008d" id="key"></span></li>
                <li class="keyBG">DEL/RESET KEYS <span data="hsl(197, 100%, 27%)" id="key1"></span></li>
                <li class="keyBG">EQUAL KEY <span data="hsl(108, 100%, 44%)" id="key2"></span></li>

                <li class="shadows hide_element">NUMBER KEYS <span data="hsl(327, 100%, 40%)" id="keyShadow"></span></li>
                <li class="shadows hide_element">DEL/RESET KEYS <span data="hsl(105, 86%, 32%)" id="keyShadow2"></span></li>
                <li class="shadows hide_element">EQUAL KEY <span data="hsl(213, 91%, 52%)" id="keyShadow1"></span></li>
                <div class="shadows-container">
                  <p>BACKGROUNDS</p>
                  <label>
                    <input type="checkbox" onclick="switchShadowColor()">
                    <div class="check"></div>
                    <div class="btn"></div>
                  </label>
                  <p>SHADOWS</p>
                </div>
              </ul>
              <ul id="tab-texts">
                <!-- <li>NUMBER TEXTS <span data="hsl(119, 99%, 49%)" style="background: hsl(119, 99%, 49%)" id="text1"></span></li>
                <li>OTHER TEXTS <span data="cyan" style="background: cyan" id="text2"></span></li> -->

                <li>NUMBER TEXTS <span data="hsl(119, 99%, 49%)" id="text1"></span></li>
                <li>OTHER TEXTS <span data="cyan" id="text2"></span></li>
              </ul>
            </div>
          </div>
      </div>
    </div>

  </main>
  <script src="JS/index.js"></script>
  <script>
    const setColor = document.querySelector(".colors");
    const colorTab = document.querySelector(".colorTab");
    const clrValue = document.querySelectorAll(".colorTab span");
    let root = document.querySelector(":root");
    const refresh = document.querySelector("#refresh");

    var n = 0;
    function setBG() {
      n = 0;
      currentTab();
      colorTab.style.transform = "translateX(0)";
    }
    function setKeys() {
      n = 1;
      currentTab();
      colorTab.style.transform = "translateX(-33.33%)";
    }
    function setText() {
      n = 2;
      currentTab();
      colorTab.style.transform = "translateX(-66.66%)";
    }
    function currentTab() {
      if (n === 0) {
        $("#BG").addClass("activeTab");
        $("#keys").removeClass("activeTab");
        $("#texts").removeClass("activeTab");
        $("#tab-BG").addClass("active-color-tab");
        $("#tab-keys").removeClass("active-color-tab");
        $("#tab-texts").removeClass("active-color-tab");
      } else if (n === 1) {
        $("#texts").removeClass("activeTab");
        $("#keys").addClass("activeTab");
        $("#BG").removeClass("activeTab");
        $("#tab-BG").removeClass("active-color-tab");
        $("#tab-keys").addClass("active-color-tab");
        $("#tab-texts").removeClass("active-color-tab");
      } else if (n === 2) {
        $("#texts").addClass("activeTab");
        $("#BG").removeClass("activeTab");
        $("#keys").removeClass("activeTab");
        $("#tab-BG").removeClass("active-color-tab");
        $("#tab-keys").removeClass("active-color-tab");
        $("#tab-texts").addClass("active-color-tab");
      }
    }
    let theme = getLocalColors();
    function getLocalColors() {
      colors = localStorage.getItem("myColors");
      if (!colors) {
          colors = {
          mainBG: "#5c040c",
          toggleBG: "#ff0c0073",
          screenBG: "#ff0c00",
          key1: "hsl(197, 100%, 27%)",
          keyShadow1: "hsl(213, 91%, 52%)",
          key2: "hsl(108, 100%, 44%)",
          keyShadow2: "hsl(105, 86%, 32%)",
          key: "#ff008d",
          keyShadow: "hsl(327, 100%, 40%)",
          text1: "cyan",
          text2: "hsl(119, 99%, 49%)"
        };
        return colors;
      } else {
        colors = JSON.parse(colors);
        return colors;
      }

    }
    function setColors(theme) {
      setColor.classList.toggle("active");
    }
    function saveColorsLocally(theme) {
      clr = JSON.stringify(theme);
      localStorage.setItem("myColors", clr);
    }

    function resetColors() {
      localStorage.removeItem("myColors");         // Remove colors from local storage.
      theme = getLocalColors();
      fillColorBoxes();
      bg = 3;
      toggleTheme();
    }
    function switchShadowColor() {
      $(".keyBG").toggleClass("hide_element");
      $(".shadows").toggleClass("hide_element");
    }

      // document.querySelector("div[name="+item.name+"]").style.backgroundColor = item.value;
      // theme.toggleBG = item.value
      // sheet.insertRule(":root.theme3{--screenBG: green}", 1);
      // root.style.setProperty("--"+item.name, item.value);
      // theme = { ...theme, ""+item.value+"": ""+item.value+"" };


    function setClrValue(item, value) {
      if (item.id === "mainBG") {
           theme.mainBG = value;
      } else if (item.id==="toggleBG") {
           theme.toggleBG = value;
      } else if (item.id==="screenBG") {
           theme.screenBG = value;
      } else if (item.id==="key1") {
           theme.key1 = value;
      } else if (item.id==="keyShadow1") {
           theme.keyShadow1 = value;
      } else if (item.id==="key2") {
           theme.key2 = value;
      } else if (item.id==="keyShadow2") {
           theme.keyShadow2 = value;
      } else if (item.id==="key") {
           theme.key = value;
      } else if (item.id==="keyShadow") {
           theme.keyShadow = value;
      } else if (item.id==="text1") {
           theme.text1 = value;
      } else if (item.id==="text2") {
           theme.text2 = value;
      }
    saveColorsLocally(theme);
    bg = 3;
    toggleTheme();
    }

const components = ["--toggleBG", "--screenBG", "--key1", "--keyShadow1", "--key2", "--keyShadow2", "--key", "--keyShadow", "--text1", "--text2"];
const theme0 = ["hsl(223, 31%, 20%)", "hsl(224, 36%, 15%)", "hsl(225, 21%, 49%)", "hsl(224, 28%, 35%)", "hsl(6, 63%, 50%)", "hsl(6, 70%, 34%)", "hsl(30, 25%, 89%)", "hsl(28, 16%, 65%)", "hsl(0, 0%, 100%)", "hsl(221, 14%, 31%)"];
const theme1 = ["hsl(0, 5%, 81%)", "hsl(0, 0%, 93%)", "hsl(185, 42%, 37%)", "hsl(185, 58%, 25%)", "hsl(25, 98%, 40%)", "hsl(25, 99%, 27%)", "hsl(45, 7%, 89%)", "hsl(35, 11%, 61%)", "hsl(60, 10%, 19%)", "hsl(60, 10%, 19%)"];
const theme2 = ["hsl(268, 71%, 12%)", "hsl(268, 71%, 12%)", "hsl(281, 89%, 26%)", "hsl(285, 91%, 52%)", "hsl(176, 100%, 44%)", "hsl(177, 92%, 70%)", "hsl(268, 47%, 21%)", "hsl(290, 70%, 36%)", "hsl(52, 100%, 62%)", "hsl(52, 100%, 62%)"];
var   theme3 = [theme.toggleBG, theme.screenBG, theme.key1, theme.keyShadow1, theme.key2, theme.keyShadow2, theme.key, theme.keyShadow, theme.text1, theme.text2];

    function switchThemes(components, themes) {
      for (var i=0; i<components.length; i++) {
           root.style.setProperty(components[i], themes[i]);
           console.log(components[i]);
         }
    }

// function staticTheme0() {
//   root.style.setProperty("--mainBG", "hsl(222, 26%, 31%)");   // No need to change since its on static container.
//   root.style.setProperty("--toggleBG", "hsl(223, 31%, 20%)");
//   root.style.setProperty("--screenBG", "hsl(224, 36%, 15%)");
//   root.style.setProperty("--key1", "hsl(225, 21%, 49%)");
//   root.style.setProperty("--keyShadow1", "hsl(224, 28%, 35%)");
//   root.style.setProperty("--key2", "hsl(6, 63%, 50%)");
//   root.style.setProperty("--keyShadow2", "hsl(6, 70%, 34%)");
//   root.style.setProperty("--key", "hsl(30, 25%, 89%)");
//   root.style.setProperty("--keyShadow", "hsl(28, 16%, 65%)");
//   root.style.setProperty("--text1", "hsl(0, 0%, 100%)");
//   root.style.setProperty("--text2", "hsl(221, 14%, 31%)");
// }
// function staticTheme1() {
//   // root.style.setProperty("--mainBG", "hsl(0, 0%, 90%)");
//   root.style.setProperty("--toggleBG", "hsl(0, 5%, 81%)");
//   root.style.setProperty("--screenBG", "hsl(0, 0%, 93%)");
//   root.style.setProperty("--key1", "hsl(185, 42%, 37%)");
//   root.style.setProperty("--keyShadow1", "hsl(185, 58%, 25%)");
//   root.style.setProperty("--key2", "hsl(25, 98%, 40%)");
//   root.style.setProperty("--keyShadow2", "hsl(25, 99%, 27%)");
//   root.style.setProperty("--key", "hsl(45, 7%, 89%)");
//   root.style.setProperty("--keyShadow", "hsl(35, 11%, 61%)");
//   root.style.setProperty("--text1", "hsl(60, 10%, 19%)");
//   root.style.setProperty("--text2", "hsl(60, 10%, 19%)");
// }
// function staticTheme2() {
//   // root.style.setProperty("--mainBG", "hsl(268, 75%, 9%)");
//   root.style.setProperty("--toggleBG", "hsl(268, 71%, 12%)");
//   root.style.setProperty("--screenBG", "hsl(268, 71%, 12%)");
//   root.style.setProperty("--key1", "hsl(281, 89%, 26%)");
//   root.style.setProperty("--keyShadow1", "hsl(285, 91%, 52%)");
//   root.style.setProperty("--key2", "hsl(176, 100%, 44%)");
//   root.style.setProperty("--keyShadow2", "hsl(177, 92%, 70%)");
//   root.style.setProperty("--key", "hsl(268, 47%, 21%)");
//   root.style.setProperty("--keyShadow", "hsl(290, 70%, 36%)");
//   root.style.setProperty("--text1", "hsl(52, 100%, 62%)");
//   root.style.setProperty("--text2", "hsl(52, 100%, 62%)");
// }
function staticTheme3() {
  root.style.setProperty("--mainBG", theme.mainBG);
  root.style.setProperty("--toggleBG", theme.toggleBG);
  root.style.setProperty("--screenBG", theme.screenBG);
  root.style.setProperty("--key1", theme.key1);
  root.style.setProperty("--keyShadow1", theme.keyShadow1);
  root.style.setProperty("--key2", theme.key2);
  root.style.setProperty("--keyShadow2", theme.keyShadow2);
  root.style.setProperty("--key", theme.key);
  root.style.setProperty("--keyShadow", theme.keyShadow);
  root.style.setProperty("--text1", theme.text1);
  root.style.setProperty("--text2", theme.text2);
}
function fillColorBoxes() {
clrValue.forEach((items) => {
  var box = document.querySelector('#'+items.id);
  box.style.background = theme[""+items.id+""];
  box.setAttribute("data",theme[items.id]);
  document.querySelector("#mainBG").setAttribute("data", theme.mainBG);
});
}
fillColorBoxes();
clrValue.forEach(item => {
  var picker = item.id;
  var data = item.getAttribute("data");
  var parent = document.querySelector('#'+picker);
  var picker = new Picker({
    parent: parent,
    color: data,
    popup: "left"
  });
  item.addEventListener("mouseover", function() {
  picker.onChange = function(color) {
    parent.style.background = color.rgbaString;
    setColor.style.visibility = "hidden";
    item.style.visibility = "visible";
    setClrValue(item, color.rgbaString);
  };
  picker.onClose = function() {
      setColor.style.visibility = "visible";
      item.style.visibility = "inherit";
  };

  });
});
  </script>
</body>

</html>
